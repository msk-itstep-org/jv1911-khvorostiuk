<!DOCTYPE html>
<html th:replace="~{layout::layout(~{::title}, ~{::#content}, _, _)}" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Регистрация</title>
</head>
<body>
    <div id="content" class="container mt-5 pt-5">
        <h1 class="mb-3 text-center">Регистрация</h1>
        <div class="alert alert-danger alert-dismissable fade show mb-3" th:if="${hasSameUsernameError}">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Имя пользователя занято</strong>
            <p>Такое имя пользователя уже занято. Пожалуйста, укажите другое имя пользователя.</p>
        </div>
        <form th:action="@{/registration}" method="post" class="w-50 m-auto mb-5 pb-5" th:object="${user}">
            <div class="form-group">
                <label for="user-username">Имя пользователя</label>
                <input id="user-username" type="text" th:field="*{username}" th:class="${errors.containsKey('username') ? 'form-control is-invalid' : 'form-control'}"/>
                <div class="invalid-feedback">
                    <ul>
                        <li th:if="${errors.containsKey('username')}" th:each="error : ${errors.get('username')}" th:text="${error}"></li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <label for="user-password">Пароль</label>
                <input id="user-password" type="password" th:field="*{password}" th:class="${errors.containsKey('password') ? 'form-control is-invalid' : 'form-control'}"/>
                <div class="invalid-feedback">
                    <ul>
                        <li th:if="${errors.containsKey('password')}" th:each="error : ${errors.get('password')}" th:text="${error}"></li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <label for="user-email">Адрес электронной почты</label>
                <input id="user-email" type="email" th:field="*{email}" th:class="${errors.containsKey('email') ? 'form-control is-invalid' : 'form-control'}"/>
                <div class="invalid-feedback">
                    <ul>
                        <li th:if="${errors.containsKey('email')}" th:each="error : ${errors.get('email')}" th:text="${error}"></li>
                    </ul>
                </div>
            </div>
            <button type="submit" class="btn btn-success">Зарегистрироваться</button>
            <a th:href="@{/login}" class="btn btn-secondary ml-3">Войти</a>
        </form>
    </div>
</body>
</html>
